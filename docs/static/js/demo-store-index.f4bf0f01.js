(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./demo/store/index.css":function(e,t,n){},"./demo/store/index.mdx":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/_@babel_runtime@7.8.3@@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("react"),o=n.n(r),s=n("./node_modules/_@mdx-js_react@1.5.5@@mdx-js/react/dist/esm.js"),c=n("./node_modules/_@babel_runtime@7.8.3@@babel/runtime/helpers/esm/slicedToArray.js"),u=n("./node_modules/_antd@3.26.7@antd/es/card/index.js"),l=n("./node_modules/_antd@3.26.7@antd/es/button/index.js"),i=n("./node_modules/_antd@3.26.7@antd/es/input/index.js"),d=n("./src/store.ts"),m=n("./node_modules/_@vue_reactivity@3.0.0-alpha.3@@vue/reactivity/dist/reactivity.esm-bundler.js"),b=Object(m.d)({count:0,message:"Hello",logs:[]});"undefined"!==typeof b&&b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"state",filename:"demo\\store\\store.ts"}});var f=Object(m.a)((function(){return b.count+1})),p=Object(m.a)((function(){return f.value+1}));Object(m.b)((function(){console.log("plusOne changed: ",f)}));var v={add:function(){return b.count+=1},log:function(e){return b.logs.unshift(e)},chat:function(e){return b.message=e}};"undefined"!==typeof v&&v&&v===Object(v)&&Object.isExtensible(v)&&Object.defineProperty(v,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"mutations",filename:"demo\\store\\store.ts"}});var O={state:b,computed:{plusOne:f,plusTwo:p}};"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"store",filename:"demo\\store\\store.ts"}}),"undefined"!==typeof Store&&Store&&Store===Object(Store)&&Object.isExtensible(Store)&&Object.defineProperty(Store,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Store",filename:"demo\\store\\store.ts"}});n("./demo/store/index.css"),n("./node_modules/_antd@3.26.7@antd/dist/antd.css");function j(){var e=Object(d.b)((function(e){var t=e.state,n=e.computed;return{count:t.count,plusOne:n.plusOne,plusTwo:n.plusTwo}}));return v.log("\u8ba1\u6570\u5668\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\ud83d\udc90"),o.a.createElement(u.a,{hoverable:!0,style:{marginBottom:24}},o.a.createElement("h1",null,"\u8ba1\u6570\u5668"),o.a.createElement("div",{className:"chunk"},o.a.createElement("div",{className:"chunk"},"store\u4e2d\u7684count\u73b0\u5728\u662f ",e.count),o.a.createElement("div",{className:"chunk"},"computed\u503c\u4e2d\u7684plusOne\u73b0\u5728\u662f ",e.plusOne.value),o.a.createElement("div",{className:"chunk"},"\u5d4c\u5957computed\u503c\u4e2d\u7684plusTwo\u73b0\u5728\u662f ",e.plusTwo.value),o.a.createElement(l.a,{onClick:v.add},"add")))}function g(){var e=Object(d.b)((function(e){return e.state.message})),t=Object(r.useState)(""),n=Object(c.a)(t,2),a=n[0],s=n[1];v.log("\u804a\u5929\u5ba4\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\ud83d\udc90");return o.a.createElement(u.a,{hoverable:!0,style:{marginBottom:24}},o.a.createElement("h1",null,"\u804a\u5929\u5ba4"),"\u5f53\u524d\u6d88\u606f\u662f: ",e,o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v.chat(a)}},o.a.createElement(i.a,{onChange:function(e){return s(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u6d88\u606f"})))}function h(){var e=Object(d.b)((function(e){return e.state.logs.map((function(e,t){return o.a.createElement("p",{className:"log",key:t},e)}))}));return o.a.createElement(u.a,{hoverable:!0},o.a.createElement("h1",null,"\u63a7\u5236\u53f0"),o.a.createElement("div",{className:"logs"},e))}var _=function(){return o.a.createElement(d.a,{value:O},o.a.createElement("div",{className:"flex"},o.a.createElement("div",{className:"left"},o.a.createElement("div",{className:"count"},o.a.createElement(j,null)),o.a.createElement("div",{className:"chat"},o.a.createElement(g,null))),o.a.createElement("div",{className:"right"},o.a.createElement(h,null))))};n.d(t,"default",(function(){return E}));var y={};function E(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(s.b)("wrapper",Object.assign({},y,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(s.b)(_,{mdxType:"Counter"},"Hi"),Object(s.b)("h3",{id:"store\u7684\u5b9a\u4e49"},"store\u7684\u5b9a\u4e49"),Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"import { reactive, computed, effect } from '@vue/reactivity';\n\nexport const state = reactive({\n  count: 0,\n  message: 'Hello',\n  logs: [] as string[],\n});\n\nconst plusOne = computed(() => state.count + 1);\nconst plusTwo = computed(() => plusOne.value + 1);\n\neffect(() => {\n  console.log('plusOne changed: ', plusOne);\n});\n\nconst add = () => (state.count += 1);\nconst log = (log: string) => state.logs.unshift(log);\nconst chat = (message: string) => (state.message = message);\n\nexport const mutations = {\n  // mutation\n  add,\n  log,\n  chat,\n};\n\nexport const store = {\n  state,\n  computed: {\n    plusOne,\n    plusTwo,\n  },\n};\n\nexport type Store = typeof store;\n")),Object(s.b)("h2",{id:"codes"},"Codes"),Object(s.b)("pre",null,Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),'import React, { useState, useCallback } from \'react\';\nimport { Card, Button, Input } from \'antd\';\nimport { Provider, useStore } from \'../../src/store\';\nimport { store, mutations, Store } from \'./store\';\nimport \'./index.css\';\nimport \'antd/dist/antd.css\';\n\nfunction Count() {\n  const countState = useStore((store: Store) => {\n    const { state, computed } = store;\n    const { count } = state;\n    const { plusOne, plusTwo } = computed;\n\n    return {\n      count,\n      plusOne,\n      plusTwo,\n    };\n  });\n\n  mutations.log(\'\u8ba1\u6570\u5668\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\ud83d\udc90\');\n\n  return (\n    <Card hoverable style={{ marginBottom: 24 }}>\n      <h1>\u8ba1\u6570\u5668</h1>\n      <div className="chunk">\n        <div className="chunk">store\u4e2d\u7684count\u73b0\u5728\u662f {countState.count}</div>\n        <div className="chunk">computed\u503c\u4e2d\u7684plusOne\u73b0\u5728\u662f {countState.plusOne.value}</div>\n        <div className="chunk">\u5d4c\u5957computed\u503c\u4e2d\u7684plusTwo\u73b0\u5728\u662f {countState.plusTwo.value}</div>\n        <Button onClick={mutations.add}>add</Button>\n      </div>\n    </Card>\n  );\n}\n\nfunction Chat() {\n  const message = useStore((store: Store) => store.state.message);\n  const [value, setValue] = useState(\'\');\n\n  mutations.log(\'\u804a\u5929\u5ba4\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\ud83d\udc90\');\n\n  const onSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    mutations.chat(value);\n  };\n\n  return (\n    <Card hoverable style={{ marginBottom: 24 }}>\n      <h1>\u804a\u5929\u5ba4</h1>\n      \u5f53\u524d\u6d88\u606f\u662f: {message}\n      <form onSubmit={onSubmit}>\n        <Input onChange={e => setValue(e.target.value)} placeholder="\u8bf7\u8f93\u5165\u6d88\u606f" />\n      </form>\n    </Card>\n  );\n}\n\nfunction Logger() {\n  const logs = useStore((store: Store) => {\n    return store.state.logs.map((log, idx) => (\n      <p className="log" key={idx}>\n        {log}\n      </p>\n    ));\n  });\n\n  return (\n    <Card hoverable>\n      <h1>\u63a7\u5236\u53f0</h1>\n      <div className="logs">{logs}</div>\n    </Card>\n  );\n}\n\nexport default () => {\n  return (\n    <Provider value={store}>\n      <div className="flex">\n        <div className="left">\n          <div className="count">\n            <Count />\n          </div>\n          <div className="chat">\n            <Chat />\n          </div>\n        </div>\n        <div className="right">\n          <Logger />\n        </div>\n      </div>\n    </Provider>\n  );\n};\n\n')))}E&&E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"demo\\store\\index.mdx"}}),E.isMDXComponent=!0},"./src/share.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var a=n("./node_modules/_@babel_runtime@7.8.3@@babel/runtime/helpers/esm/slicedToArray.js"),r=n("react"),o=n("./node_modules/_@vue_reactivity@3.0.0-alpha.3@@vue/reactivity/dist/reactivity.esm-bundler.js"),s=function(){var e=Object(r.useReducer)((function(e){return e+1}),0);return Object(a.a)(e,2)[1]};"undefined"!==typeof s&&s&&s===Object(s)&&Object.isExtensible(s)&&Object.defineProperty(s,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useForceUpdate",filename:"src\\share.ts"}});var c=function(){var e=Object(r.useRef)();e.current||(e.current=o.b.apply(void 0,arguments));var t=function(){Object(o.g)(e.current)};return Object(r.useEffect)((function(){return t}),[]),e.current};"undefined"!==typeof c&&c&&c===Object(c)&&Object.isExtensible(c)&&Object.defineProperty(c,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useEffection",filename:"src\\share.ts"}})},"./src/store.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return i}));var a=n("react"),r=n.n(a),o=n("./node_modules/_@vue_reactivity@3.0.0-alpha.3@@vue/reactivity/dist/reactivity.esm-bundler.js"),s=n("./src/share.ts"),c=r.a.createContext(null),u=function(e){var t=Object(s.b)(),n=function(){var e=Object(a.useContext)(c);if(!e)throw new Error("could not find store context value; please ensure the component is wrapped in a <Provider>");return e}();return Object(s.a)((function(){return e(n)}),{scheduler:t,lazy:!0})()};"undefined"!==typeof u&&u&&u===Object(u)&&Object.isExtensible(u)&&Object.defineProperty(u,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useStore",filename:"src\\store.ts"}});var l=function(e){return Object.keys(e).reduce((function(t,n){var a=e[n];return t[n]=function(){Object(o.c)(),a.apply(void 0,arguments),Object(o.f)()},t}),{})};l&&l===Object(l)&&Object.isExtensible(l)&&Object.defineProperty(l,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"createMutations",filename:"src\\store.ts"}});var i=c.Provider;"undefined"!==typeof i&&i&&i===Object(i)&&Object.isExtensible(i)&&Object.defineProperty(i,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Provider",filename:"src\\store.ts"}})}}]);